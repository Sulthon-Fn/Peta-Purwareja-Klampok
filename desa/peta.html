<!DOCTYPE html>
<html lang="id">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Peta Interaktif - Desa Kecitran</title>
        <meta name="description" content="Peta interaktif berbasis WebGIS untuk Desa Kecitran, Kecamatan Purwareja Klampok, Kabupaten Banjarnegara.">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <style>
            :root {
                --primary-color: #0F2C59;
                --secondary-color: #059669;
                --accent-color: #F59E0B;
                --light-bg: #F8FAFC;
                --text-dark: #1E293B;
                --text-light: #64748B;
            }
            *, *::before, *::after { box-sizing: border-box; }
            html { scroll-behavior: smooth; overflow-y: auto !important; height: auto; }
            body {
                margin: 0;
                font-family: 'Space Grotesk', sans-serif;
                line-height: 1.6;
                color: var(--text-dark);
                background: var(--light-bg);
                overflow-y: auto !important;
                height: auto;
            }
            
            /* Header */
            header {
                background: linear-gradient(135deg, var(--primary-color) 0%, #1a4080 100%);
                color: #fff;
                padding: 0 2rem;
                position: sticky;
                top: 0;
                z-index: 100;
                box-shadow: 0 4px 20px rgba(15, 44, 89, 0.15);
            }
            .nav-bar {
                display: flex;
                justify-content: space-between;
                align-items: center;
                max-width: 1400px;
                margin: 0 auto;
                height: 70px;
            }
            .brand {
                display: flex;
                align-items: center;
                gap: 12px;
                font-weight: 600;
                font-size: 1.1rem;
            }
            .brand img {
                width: 40px;
                height: 40px;
                border-radius: 8px;
                object-fit: cover;
            }
            .menu-toggle { display: none; font-size: 1.5rem; background: none; color: #fff; border: none; cursor: pointer; }
            .menu { display: flex; gap: 8px; }
            .menu a {
                color: rgba(255,255,255,0.85);
                text-decoration: none;
                font-weight: 500;
                padding: 8px 16px;
                border-radius: 8px;
                transition: all 0.3s ease;
            }
            .menu a:hover { background: rgba(255,255,255,0.15); color: #fff; }
            
            @media (max-width: 768px) {
                .menu-toggle { display: block; }
                .menu { 
                    display: none; 
                    flex-direction: column; 
                    position: absolute; 
                    top: 70px; 
                    left: 0; 
                    right: 0;
                    background: var(--primary-color);
                    padding: 1rem;
                }
                .menu.show { display: flex; }
            }

            /* Page Title */
            .page-title {
                background: linear-gradient(135deg, var(--secondary-color) 0%, #047857 100%);
                color: #fff;
                padding: 2rem;
                text-align: center;
            }
            .page-title h1 {
                margin: 0;
                font-size: 1.8rem;
                font-weight: 700;
            }
            .page-title p {
                margin: 0.5rem 0 0;
                opacity: 0.9;
                font-size: 1rem;
            }

            /* Map Container */
            .map-container {
                padding: 1.5rem;
                max-width: 1600px;
                margin: 0 auto;
            }
            .map-wrap {
                position: relative;
                background: #fff;
                border-radius: 16px;
                overflow: hidden;
                box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            }
            #map {
                width: 100%;
                height: calc(100vh - 200px);
                min-height: 500px;
            }
            
            /* Map Overlay Panel */
            .map-overlay {
                position: absolute;
                top: 10px;
                right: 10px;
                z-index: 1000;
            }
            .layer-drawer {
                background: rgba(255,255,255,0.98);
                border-radius: 12px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.15);
                min-width: 280px;
                max-width: 320px;
                transition: all 0.3s ease;
            }
            .layer-drawer.collapsed .drawer-body { display: none; }
            .drawer-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 14px 16px;
                border-bottom: 1px solid #e2e8f0;
                cursor: pointer;
            }
            .drawer-title { font-weight: 600; color: var(--primary-color); margin: 0; font-size: 0.95rem; }
            .drawer-sub { font-size: 0.75rem; color: var(--text-light); margin: 0; }
            .drawer-toggle {
                background: var(--secondary-color);
                color: #fff;
                border: none;
                border-radius: 6px;
                padding: 6px 10px;
                cursor: pointer;
                font-size: 1rem;
            }
            .drawer-body { padding: 12px 16px; max-height: 60vh; overflow-y: auto; }
            .layer-section { margin-bottom: 12px; }
            .layer-section-title { font-size: 0.75rem; color: var(--text-light); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600; }
            .layer-toggle {
                display: flex;
                align-items: center;
                gap: 10px;
                padding: 6px 0;
                cursor: pointer;
                font-size: 0.85rem;
            }
            .layer-toggle input { width: 16px; height: 16px; accent-color: var(--secondary-color); }
            .layer-toggle .badge {
                margin-left: auto;
                font-size: 0.65rem;
                background: var(--secondary-color);
                color: #fff;
                padding: 2px 6px;
                border-radius: 20px;
            }
            .layer-toggle .color-swatch {
                width: 14px;
                height: 14px;
                border-radius: 3px;
                border: 1px solid rgba(0,0,0,0.15);
            }
            
            /* Instruction Box */
            .instruction-box {
                background: linear-gradient(135deg, #f0fdf4 0%, #ecfeff 100%);
                border-left: 4px solid var(--secondary-color);
                padding: 1rem 1.5rem;
                margin-bottom: 1.5rem;
                border-radius: 0 12px 12px 0;
            }
            .instruction-box h3 {
                color: var(--secondary-color);
                margin: 0 0 0.5rem;
                font-size: 1rem;
            }
            .instruction-box p {
                margin: 0;
                color: var(--text-light);
                font-size: 0.9rem;
            }

            /* Footer */
            footer {
                background: var(--primary-color);
                color: rgba(255,255,255,0.8);
                text-align: center;
                padding: 1.5rem;
                font-size: 0.85rem;
            }

            /* Label Styling */
            .village-label, .rt-label, .landmark-label {
                background: transparent !important;
                border: none !important;
                box-shadow: none !important;
            }

            /* Popup Styling */
            .leaflet-popup-content-wrapper {
                border-radius: 12px !important;
                box-shadow: 0 4px 20px rgba(0,0,0,0.15) !important;
                font-family: 'Space Grotesk', sans-serif !important;
            }
            .leaflet-popup-content {
                margin: 12px 16px !important;
            }
            .leaflet-popup-content table {
                border-collapse: collapse;
                width: 100%;
            }
            .leaflet-popup-content th,
            .leaflet-popup-content td {
                padding: 8px 12px;
                text-align: left;
            }
            .leaflet-popup-content th {
                background: #f1f5f9;
                font-weight: 600;
                color: var(--text-dark);
            }

            /* Custom marker styling */
            .custom-marker {
                background: transparent;
                border: none;
            }
        </style>
    </head>
    <body>
        <header>
            <div class="nav-bar">
                <div class="brand">
                    <img src="images/Banjarnegara.png" alt="Logo Kabupaten Banjarnegara">
                    <span>Geoportal Desa Kecitran</span>
                </div>
                <button class="menu-toggle" aria-label="Toggle menu">‚ò∞</button>
                <nav class="menu" aria-label="Navigasi utama">
                    <a href="../index.html">üè† Beranda</a>
                    <a href="../kecamatan/peta.html">üó∫Ô∏è Peta Kecamatan</a>
                    <a href="peta.html" style="background: rgba(255,255,255,0.15); color: #fff;">üèòÔ∏è Peta Desa Kecitran</a>
                </nav>
            </div>
        </header>

        <section class="page-title">
            <h1>üèòÔ∏è Peta Interaktif Desa Kecitran</h1>
            <p>Visualisasi spasial wilayah desa dengan data RT/RW dan fasilitas umum</p>
        </section>

        <main class="map-container">
            <div class="instruction-box">
                <h3>üìå Petunjuk Penggunaan</h3>
                <p>Gunakan fitur <strong>Layer Control</strong> (panel kanan) untuk menyaring informasi. Klik pada area RT/RW untuk melihat detail. Arahkan kursor ke area untuk highlight.</p>
            </div>

            <div class="map-wrap">
                <div id="map"></div>
                <aside class="map-overlay">
                    <div class="layer-drawer collapsed" id="layerDrawer">
                        <div class="drawer-header">
                            <div>
                                <p class="drawer-title">Layer Control</p>
                                <p class="drawer-sub">Toggle layer peta</p>
                            </div>
                            <button class="drawer-toggle" id="drawerToggle" aria-label="Tampilkan panel">‚ò∞</button>
                        </div>

                        <div class="drawer-body">
                            <div class="layer-section">
                                <p class="layer-section-title">Basemap</p>
                                <label class="layer-toggle">
                                    <input type="checkbox" data-layer-key="basemap" checked disabled>
                                    <span>Google Satellite</span>
                                    <span class="badge">Aktif</span>
                                </label>
                            </div>

                            <div class="layer-section">
                                <p class="layer-section-title">Batas Administrasi</p>
                                <label class="layer-toggle">
                                    <input type="checkbox" data-layer-key="batasDesa" checked>
                                    <span>Batas Desa Kecitran</span>
                                </label>
                                <label class="layer-toggle">
                                    <input type="checkbox" data-layer-key="batasRW" checked>
                                    <span>Batas RW</span>
                                </label>
                                <label class="layer-toggle">
                                    <input type="checkbox" data-layer-key="rtRW" checked>
                                    <span>Batas RT/RW</span>
                                </label>
                            </div>

                            <div class="layer-section">
                                <p class="layer-section-title">Infrastruktur</p>
                                <label class="layer-toggle">
                                    <input type="checkbox" data-layer-key="jalan" checked>
                                    <span>Jalan Desa</span>
                                </label>
                            </div>

                            <div class="layer-section">
                                <p class="layer-section-title">Fasilitas</p>
                                <label class="layer-toggle">
                                    <input type="checkbox" data-layer-key="landmark" checked>
                                    <span>Landmark & Fasilitas</span>
                                </label>
                            </div>

                            <div class="layer-section">
                                <p class="layer-section-title">Lainnya</p>
                                <label class="layer-toggle">
                                    <input type="checkbox" data-layer-key="rumahSaya" checked>
                                    <span>Posisi Rumah Pengembang</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </main>

        <footer>
            ¬© 2025 Sistem Informasi Geografis Desa Kecitran. Dikembangkan oleh Sulthon FN (Universitas Amikom Purwokerto). Dibuat menggunakan QGIS &amp; Leaflet JS.
        </footer>

        <script>
            // Menu toggle
            const toggle = document.querySelector('.menu-toggle');
            const menu = document.querySelector('.menu');
            if (toggle && menu) {
                toggle.addEventListener('click', () => menu.classList.toggle('show'));
            }

            // Layer drawer toggle
            const drawerToggle = document.getElementById('drawerToggle');
            const layerDrawer = document.getElementById('layerDrawer');
            if (drawerToggle && layerDrawer) {
                drawerToggle.addEventListener('click', () => {
                    layerDrawer.classList.toggle('collapsed');
                });
            }
        </script>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/L.Control.Layers.Tree.min.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <!-- Data files -->
        <script src="data/batasdesakecitran_1.js"></script>
        <script src="data/BatasRW_2.js"></script>
        <script src="data/rt_rw_3.js"></script>
        <script src="data/JalanDesaKecitran_4.js"></script>
        <script src="data/LandmarkadminitratifsekolahfaskesTPU_5.js"></script>
        <script src="data/PosisiRumahSaya_6.js"></script>
        <script>
        // ========== Map Initialization ==========
        var map = L.map('map', {
            zoomControl: true,
            maxZoom: 22,
            minZoom: 12
        }).setView([-7.477, 109.445], 16);

        var hash = new L.Hash(map);

        // ========== Basemap ==========
        map.createPane('pane_basemap');
        map.getPane('pane_basemap').style.zIndex = 400;
        
        var layer_basemap = L.tileLayer('https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
            pane: 'pane_basemap',
            opacity: 1.0,
            attribution: 'Google Satellite',
            minZoom: 1,
            maxZoom: 22
        });
        map.addLayer(layer_basemap);

        // ========== Batas Desa Kecitran ==========
        map.createPane('pane_batasDesa');
        map.getPane('pane_batasDesa').style.zIndex = 401;

        var layer_batasDesa = new L.geoJson(json_batasdesakecitran_1, {
            pane: 'pane_batasDesa',
            style: function() {
                return {
                    color: '#388E3C',
                    weight: 3,
                    fillOpacity: 0.15,
                    fillColor: '#4CAF50'
                };
            },
            onEachFeature: function(feature, layer) {
                var popupContent = '<table>\
                    <tr>\
                        <th style="padding: 10px; background: #059669; color: white; border-radius: 6px 6px 0 0;">Desa Kecitran</th>\
                    </tr>\
                    <tr>\
                        <td style="padding: 8px;"><strong>Nama:</strong> ' + (feature.properties['Nama'] || 'Kecitran') + '</td>\
                    </tr>\
                    <tr>\
                        <td style="padding: 8px;"><strong>Luas:</strong> ' + (feature.properties['luas'] || '¬± 241 Ha') + '</td>\
                    </tr>\
                    <tr>\
                        <td style="padding: 8px;"><strong>Jumlah Penduduk:</strong> ' + (feature.properties['jml pend'] || '¬± 3.500 Jiwa') + '</td>\
                    </tr>\
                    <tr>\
                        <td style="padding: 8px;"><strong>Jumlah Dusun:</strong> ' + (feature.properties['jml dusun'] || '3 Dusun') + '</td>\
                    </tr>\
                </table>';
                layer.bindPopup(popupContent);
                
                // Hover effect
                layer.on('mouseover', function(e) {
                    e.target.setStyle({
                        weight: 5,
                        color: '#F59E0B',
                        fillOpacity: 0.25
                    });
                });
                layer.on('mouseout', function(e) {
                    e.target.setStyle({
                        color: '#388E3C',
                        weight: 3,
                        fillOpacity: 0.15
                    });
                });
            }
        });
        map.addLayer(layer_batasDesa);

        // ========== Batas RW (Warna berbeda per RW) ==========
        map.createPane('pane_batasRW');
        map.getPane('pane_batasRW').style.zIndex = 402;

        var rwColors = {
            'RW 01': { color: '#E9EE85', label: 'RW 01' },
            'RW 02': { color: '#DD41D3', label: 'RW 02' },
            'RW 03': { color: '#554AE7', label: 'RW 03' },
            'RW 04': { color: '#DB746C', label: 'RW 04' },
            'RW 5': { color: '#4FC5CB', label: 'RW 05' }
        };

        var layer_batasRW = new L.geoJson(json_BatasRW_2, {
            pane: 'pane_batasRW',
            style: function(feature) {
                var rw = feature.properties['RW'];
                var rwStyle = rwColors[rw] || { color: '#5DE363' };
                return {
                    color: rwStyle.color,
                    weight: 4,
                    fillOpacity: 0,
                    opacity: 0.9
                };
            },
            onEachFeature: function(feature, layer) {
                var rw = feature.properties['RW'] || 'Unknown';
                var popupContent = '<table>\
                    <tr>\
                        <th style="padding: 10px; background: #0F2C59; color: white; border-radius: 6px 6px 0 0;">Batas RW</th>\
                    </tr>\
                    <tr>\
                        <td style="padding: 8px;"><strong>' + rw + '</strong></td>\
                    </tr>\
                </table>';
                layer.bindPopup(popupContent);
                
                // Hover effect
                var originalColor = (rwColors[rw] || { color: '#5DE363' }).color;
                layer.on('mouseover', function(e) {
                    e.target.setStyle({
                        weight: 6,
                        color: '#F59E0B'
                    });
                });
                layer.on('mouseout', function(e) {
                    e.target.setStyle({
                        weight: 4,
                        color: originalColor
                    });
                });
            }
        });
        map.addLayer(layer_batasRW);

        // ========== RT/RW (Warna berbeda per RT) ==========
        map.createPane('pane_rtRW');
        map.getPane('pane_rtRW').style.zIndex = 403;

        // Warna unik untuk setiap RT/RW (dari QGIS export)
        var rtColors = {
            'RT 01 RW 01': '#2BE028',
            'RT 01 RW 02': '#82D046',
            'RT 01 RW 03': '#CAA750',
            'RT 01 RW 04': '#C957C9',
            'RT 01 RW 05': '#EC80A7',
            'RT 02 RW 01': '#D7A472',
            'RT 02 RW 02': '#D8E585',
            'RT 02 RW 03': '#E98897',
            'RT 02 RW 04': '#DC521C',
            'RT 03 RW 01': '#29D9E6',
            'RT 03 RW 02': '#69E846',
            'RT 03 RW 03': '#E46CCA',
            'RT 03 RW 04': '#1926DC',
            'RT 03 RW 05': '#38E2A4',
            'RT 04 RW 01': '#25DB49',
            'RT 04 RW 02': '#6DACEA',
            'RT 04 RW 03': '#5E1BD9',
            'RT 04 RW 04': '#9DE90F',
            'RT 04 RW 05': '#821FCD',
            'RT 05 RW 01': '#E86F49',
            'RT 05 RW 02': '#E04D62',
            'RT 05 RW 03': '#DDB24D',
            'RT 05 RW 04': '#DD4FB8',
            'RT 05 RW 05': '#E4BE71',
            'RT 06 RW 01': '#E74F8E',
            'RT 06 RW 02': '#DF7A27',
            'RT 06 RW 05': '#3FCE26'
        };

        var layer_rtRW = new L.geoJson(json_rt_rw_3, {
            pane: 'pane_rtRW',
            style: function(feature) {
                var rtRw = feature.properties['RT/RW'];
                var fillColor = rtColors[rtRw] || '#77DD77';
                return {
                    color: '#388636',
                    weight: 1,
                    fillOpacity: 0.5,
                    fillColor: fillColor
                };
            },
            onEachFeature: function(feature, layer) {
                var rtRw = feature.properties['RT/RW'] || 'Unknown';
                var popupContent = '<table>\
                    <tr>\
                        <th style="padding: 10px; background: #0F2C59; color: white; border-radius: 6px 6px 0 0;">Wilayah RT/RW</th>\
                    </tr>\
                    <tr>\
                        <td style="padding: 8px; font-size: 1.1em;"><strong>' + rtRw + '</strong></td>\
                    </tr>\
                </table>';
                layer.bindPopup(popupContent);
                
                // Hover effect
                var originalColor = rtColors[rtRw] || '#77DD77';
                layer.on('mouseover', function(e) {
                    e.target.setStyle({
                        weight: 3,
                        color: '#F59E0B',
                        fillOpacity: 0.7
                    });
                    e.target.bringToFront();
                });
                layer.on('mouseout', function(e) {
                    e.target.setStyle({
                        color: '#388636',
                        weight: 1,
                        fillOpacity: 0.5,
                        fillColor: originalColor
                    });
                });
            }
        });
        map.addLayer(layer_rtRW);

        // ========== Jalan Desa ==========
        map.createPane('pane_jalan');
        map.getPane('pane_jalan').style.zIndex = 410;

        var layer_jalan = new L.geoJson(json_JalanDesaKecitran_4, {
            pane: 'pane_jalan',
            style: function() {
                return {
                    color: '#FFC107',
                    weight: 3,
                    opacity: 0.85
                };
            },
            onEachFeature: function(feature, layer) {
                // Hover effect
                layer.on('mouseover', function(e) {
                    e.target.setStyle({
                        weight: 5,
                        color: '#FF9800'
                    });
                });
                layer.on('mouseout', function(e) {
                    e.target.setStyle({
                        weight: 3,
                        color: '#FFC107'
                    });
                });
            }
        });
        map.addLayer(layer_jalan);

        // ========== Landmark & Fasilitas ==========
        map.createPane('pane_landmark');
        map.getPane('pane_landmark').style.zIndex = 500;

        var layer_landmark = new L.geoJson(json_LandmarkadminitratifsekolahfaskesTPU_5, {
            pane: 'pane_landmark',
            pointToLayer: function(feature, latlng) {
                return L.marker(latlng, {
                    icon: L.divIcon({
                        html: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" width="32" height="32"><defs><filter id="shadowL" x="-20%" y="-20%" width="140%" height="140%"><feDropShadow dx="0" dy="1" stdDeviation="1.5" flood-opacity="0.4"/></filter></defs><circle cx="18" cy="18" r="14" fill="rgba(5, 150, 105, 0.85)" filter="url(#shadowL)"/><text x="18" y="23" text-anchor="middle" font-size="14">üìç</text></svg>',
                        className: 'custom-marker',
                        iconSize: [32, 32],
                        iconAnchor: [16, 16]
                    })
                });
            },
            onEachFeature: function(feature, layer) {
                var nama = feature.properties['Nama'] || 'Landmark';
                var popupContent = '<table>\
                    <tr>\
                        <th style="padding: 10px; background: #059669; color: white; border-radius: 6px 6px 0 0;">Landmark</th>\
                    </tr>\
                    <tr>\
                        <td style="padding: 8px;"><strong>' + nama + '</strong></td>\
                    </tr>\
                </table>';
                layer.bindPopup(popupContent);
            }
        });
        map.addLayer(layer_landmark);

        // ========== Posisi Rumah Pengembang ==========
        map.createPane('pane_rumahSaya');
        map.getPane('pane_rumahSaya').style.zIndex = 501;

        var layer_rumahSaya = new L.geoJson(json_PosisiRumahSaya_6, {
            pane: 'pane_rumahSaya',
            pointToLayer: function(feature, latlng) {
                return L.marker(latlng, {
                    icon: L.divIcon({
                        html: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" width="36" height="36"><defs><filter id="shadowH" x="-20%" y="-20%" width="140%" height="140%"><feDropShadow dx="0" dy="1" stdDeviation="1.5" flood-opacity="0.4"/></filter></defs><circle cx="18" cy="18" r="15" fill="rgba(245, 158, 11, 0.9)" filter="url(#shadowH)"/><text x="18" y="24" text-anchor="middle" font-size="16">üè†</text></svg>',
                        className: 'custom-marker',
                        iconSize: [36, 36],
                        iconAnchor: [18, 18]
                    })
                });
            },
            onEachFeature: function(feature, layer) {
                var popupContent = '<table>\
                    <tr>\
                        <th style="padding: 10px; background: #F59E0B; color: white; border-radius: 6px 6px 0 0;">üè† Rumah Pengembang</th>\
                    </tr>\
                    <tr>\
                        <td style="padding: 8px;">Sulthon FN - Universitas Amikom Purwokerto</td>\
                    </tr>\
                </table>';
                layer.bindPopup(popupContent);
            }
        });
        map.addLayer(layer_rumahSaya);

        // ========== Layer Toggle Functionality ==========
        var layers = {
            'batasDesa': layer_batasDesa,
            'batasRW': layer_batasRW,
            'rtRW': layer_rtRW,
            'jalan': layer_jalan,
            'landmark': layer_landmark,
            'rumahSaya': layer_rumahSaya
        };

        var layerToggles = document.querySelectorAll('[data-layer-key]');
        layerToggles.forEach(function(toggle) {
            toggle.addEventListener('change', function() {
                var layerKey = this.getAttribute('data-layer-key');
                if (layers[layerKey]) {
                    if (this.checked) {
                        map.addLayer(layers[layerKey]);
                    } else {
                        map.removeLayer(layers[layerKey]);
                    }
                }
            });
        });

        // Fit map to show all area
        map.fitBounds(layer_batasDesa.getBounds(), {
            padding: [30, 30]
        });
        </script>        
    </body>
</html>
